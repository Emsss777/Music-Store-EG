<!DOCTYPE html>
<html lang="en">
<!--@thymesVar id="albums" type="java.util.List<app.model.entity.Album>"-->
<!--@thymesVar id="genres" type="app.model.enums.PrimaryGenre[]"-->
<!--@thymesVar id="selectedGenre" type="app.model.enums.PrimaryGenre"-->

<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/common.css">
    <link rel="stylesheet" type="text/css" href="/css/catalog.css">
    <title>Music Catalog | Music Store</title>
</head>

<body>

<th:block th:replace="~{fragments/header :: site-header}"></th:block>

<main>
    <div class="catalog-header">
        <div class="container">
            <h1 class="page-title">Music Catalog</h1>
            <p class="page-subtitle">Browse our complete collection of albums and singles</p>
        </div>
    </div>

    <section class="catalog-section">
        <div class="container">
            <div class="catalog-layout">
                <aside class="filters-sidebar">
                    <div class="filters-card card">
                        <h3 class="filters-title">Filters</h3>

                        <div class="filter-group">
                            <h4>Genre</h4>
                            <div class="filter-options">
                                <label class="checkbox-container">
                                    <a style="text-decoration: none; color: inherit; display: flex;
                                    align-items: center;" th:href="@{/catalog}">
                                        <input type="checkbox" name="genre" value="all"
                                               th:checked="${selectedGenre == null}">
                                        <span class="checkmark"></span>
                                        All Genres
                                    </a>
                                </label>
                                <label class="checkbox-container" th:each="genre : ${genres}">
                                    <a style="text-decoration: none; color: inherit; display: flex;
                                    align-items: center;" th:href="@{/catalog(genre=${genre})}">
                                        <input type="checkbox" name="genre" th:value="${genre}"
                                               th:checked="${selectedGenre == genre}">
                                        <span class="checkmark"></span>
                                        <span
                                                th:text="${#strings.capitalize(#strings.replace(#strings.toLowerCase(genre), '_', ' '))}">
                                            Genre
                                        </span>
                                    </a>
                                </label>
                            </div>
                        </div>

                        <div class="filter-group">
                            <h4>Price Range</h4>
                            <div class="price-range">
                                <label for="priceRange" class="sr-only">Price Range</label>
                                <input type="range" id="priceRange"
                                       min="0" max="50" value="25" class="price-slider">
                                <div class="price-labels">
                                    <span>$0</span>
                                    <span>$25</span>
                                    <span>$50+</span>
                                </div>
                            </div>
                        </div>

                        <div class="filter-group">
                            <h4>Release Year</h4>
                            <div class="year-filter">
                                <label>
                                    <select class="year-select">
                                        <option value="">Any Year</option>
                                        <option value="2024">2024</option>
                                        <option value="2023">2023</option>
                                        <option value="2022">2022</option>
                                        <option value="2021">2021</option>
                                        <option value="2020">2020</option>
                                        <option value="older">Older</option>
                                    </select>
                                </label>
                            </div>
                        </div>

                        <div class="filter-group">
                            <h4>Format</h4>
                            <div class="filter-options">
                                <label class="checkbox-container">
                                    <input type="checkbox" name="format" value="album">
                                    <span class="checkmark"></span>
                                    Albums
                                </label>
                                <label class="checkbox-container">
                                    <input type="checkbox" name="format" value="single">
                                    <span class="checkmark"></span>
                                    Singles
                                </label>
                            </div>
                        </div>

                        <a class="clear-filters-btn" style="text-decoration: none; text-align: center;
                        display: block;" th:href="@{/catalog}">Clear All Filters</a>
                    </div>
                </aside>

                <div class="catalog-content">
                    <div class="catalog-toolbar">
                        <div class="results-info">
                            <span class="results-count" th:if="${selectedGenre == null}"
                                  th:text="'Showing ' + ${albums.size()} + ' results'"></span>
                            <span class="results-count" th:if="${selectedGenre != null}"
                                  th:text="'Showing ' + ${albums.size()} + ' ' + ${#strings.capitalize(
                                  #strings.replace(#strings.toLowerCase(selectedGenre), '_', ' '))} + ' albums'">
                            </span>
                        </div>
                        <div class="sort-options">
                            <label for="sort">Sort by:</label>
                            <select id="sort" class="sort-select">
                                <option value="newest">Newest First</option>
                                <option value="oldest">Oldest First</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                                <option value="name">Name A-Z</option>
                            </select>
                        </div>
                    </div>

                    <!--@thymesVar id="album" type="app.model.entity.Album"-->
                    <div class="album-grid grid grid-3">
                        <div class="album-card card" th:each="album : ${albums}">
                            <div class="album-image">
                                <img th:src="@{${album.coverUrl}}"
                                     th:alt="${album.title}">
                                <div class="album-overlay light">
                                    <button class="play-button">â–¶</button>
                                </div>
                            </div>
                            <div class="album-info">
                                <h3 class="album-title" th:text="${album.title}"></h3>
                                <p class="album-artist" th:text="${album.artist.artistName}"></p>
                                <div class="album-meta">
                                    <span class="album-year" th:text="${album.year}"></span>
                                    <span class="album-genre" th:text="${album.genre}"></span>
                                </div>
                                <div class="album-price">
                                    <span class="price" th:text="'$' + ${album.price}"></span>
                                </div>
                                <a class="button primary" th:href="@{/album/{id}(id=${album.id})}">View Details</a>
                            </div>
                        </div>
                    </div>

                    <div class="pagination">
                        <button class="pagination-btn prev" disabled>Previous</button>
                        <div class="pagination-pages">
                            <button class="pagination-btn active">1</button>
                            <button class="pagination-btn">2</button>
                            <button class="pagination-btn">3</button>
                            <span class="pagination-ellipsis">...</span>
                            <button class="pagination-btn">13</button>
                        </div>
                        <button class="pagination-btn next">Next</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<th:block th:replace="~{fragments/footer :: site-footer}"></th:block>

</body>

</html>
