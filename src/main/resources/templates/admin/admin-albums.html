<!DOCTYPE html>
<html lang="en">
<!--@thymesVar id="albums" type="java.util.List<app.model.entity.Album>"-->
<!--@thymesVar id="genres" type="app.model.enums.PrimaryGenre[]"-->
<!--@thymesVar id="selectedGenre" type="app.model.enums.PrimaryGenre"-->
<!--@thymesVar id="success" type="java.lang.String"-->
<!--@thymesVar id="error" type="java.lang.String"-->

<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/common.css">
    <link rel="stylesheet" type="text/css" href="/css/admin/admin-albums.css">
    <title>Manage Albums | Music Store Admin</title>
</head>

<body>

<th:block th:replace="~{fragments/header :: site-header}"></th:block>

<main>
    <div class="admin-header">
        <div class="container">
            <h1 class="page-title">Manage Albums</h1>
            <p class="page-subtitle">Add, edit, and manage your music catalog</p>
        </div>
    </div>

    <section class="albums-section">
        <div class="container">
            <div class="alert alert-success" th:if="${success}" th:text="${success}"></div>
            <div class="alert alert-error" th:if="${error}" th:text="${error}"></div>

            <div class="albums-toolbar">
                <div class="toolbar-left">
                    <div class="search-box">
                        <label for="searchAlbums" class="sr-only">Search Albums</label>
                        <input type="text" id="searchAlbums"
                               placeholder="Search albums..." class="search-input">
                        <button class="search-btn">üîç</button>
                    </div>

                    <div class="filter-dropdown">
                        <label>
                            <select class="filter-select" onchange="window.location.href=this.value">
                                <option value="/admin/albums" th:selected="${selectedGenre == null}">All Genres</option>
                                <option th:each="genre : ${genres}"
                                        th:value="'/admin/albums?genre=' + ${genre}"
                                        th:selected="${selectedGenre == genre}"
                                        th:text="${#strings.capitalize(#strings.replace(#strings.toLowerCase(genre), '_', ' '))}">
                                </option>
                            </select>
                        </label>
                    </div>
                    <div class="results-info">
                        <span class="results-count" th:if="${selectedGenre == null}"
                              th:text="'Showing ' + ${albums.size()} + ' albums'"></span>
                        <span class="results-count" th:if="${selectedGenre != null}"
                              th:text="'Showing ' + ${albums.size()} + ' ' + ${#strings.capitalize(
                              #strings.replace(#strings.toLowerCase(selectedGenre), '_', ' '))} + ' albums'">
                        </span>
                    </div>
                </div>
                <div class="toolbar-right">
                    <a class="add-album-btn button primary" th:href="@{/admin/albums/add}">
                        <span class="btn-icon">+</span>
                        Add New Album
                    </a>
                </div>
            </div>

            <div class="albums-grid">
                <div class="album-management-card card" th:each="album : ${albums}">
                    <div class="album-image">
                        <img th:src="@{${album.coverUrl}}" th:alt="${album.title}">
                        <div class="album-overlay dark">
                            <button class="edit-btn" title="Edit Album">‚úèÔ∏è</button>
                            <form th:action="@{/admin/albums/{id}/remove(id=${album.id})}"
                                  th:method="POST" style="display: inline;"
                                  onsubmit="return confirm(
                                      'Are you sure you want to delete this album? ' +
                                      'This action cannot be undone.');">
                                <button type="submit" class="delete-btn" title="Delete Album">üóëÔ∏è</button>
                            </form>
                        </div>
                    </div>
                    <div class="album-info">
                        <h3 class="album-title" th:text="${album.title}"></h3>
                        <p class="album-artist" th:text="${album.artist.artistName}"></p>
                        <div class="album-meta">
                            <span class="album-genre" th:text="${album.genre}"></span>
                            <span class="album-year" th:text="${album.year}"></span>
                        </div>
                        <div class="album-price" th:text="'$' + ${album.price}"></div>
                        <div class="album-stats">
                            <span class="sales-count">0 sales</span>
                            <span class="status-badge active">Active</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pagination">
                <button class="pagination-btn prev" disabled>Previous</button>
                <div class="pagination-pages">
                    <button class="pagination-btn active">1</button>
                    <button class="pagination-btn">2</button>
                    <button class="pagination-btn">3</button>
                    <span class="pagination-ellipsis">...</span>
                    <button class="pagination-btn">12</button>
                </div>
                <button class="pagination-btn next">Next</button>
            </div>
        </div>
    </section>
</main>

<th:block th:replace="~{fragments/footer :: site-footer}"></th:block>

</body>

</html>
