<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" th:href="@{/css/common.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/admin/admin-dashboard.css}">
    <title>Admin Dashboard | Music Store</title>
</head>

<body>

<th:block th:replace="~{fragments/header :: site-header}"></th:block>

<main>
    <div class="admin-header">
        <div class="container">
            <h1 class="page-title">Admin Dashboard</h1>
            <p class="page-subtitle">Manage your music store</p>
        </div>
    </div>

    <section class="dashboard-section">
        <div class="container">
            <!-- Quick Stats -->
            <div class="stats-grid">
                <div class="stat-card card">
                    <div class="stat-icon">üéµ</div>
                    <div class="stat-content">
                        <h3>Total Albums</h3>
                        <p class="stat-number" th:text="${totalAlbums}">0</p>
                        <span class="stat-change positive">+12% this month</span>
                    </div>
                </div>
                <div class="stat-card card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-content">
                        <h3>Total Revenue</h3>
                        <p class="stat-number"><span th:text="${totalRevenue}">0</span> ‚Ç¨</p>
                        <span class="stat-change positive">+8% this month</span>
                    </div>
                </div>
                <div class="stat-card card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-content">
                        <h3>Active Users</h3>
                        <p class="stat-number" th:text="${activeUsers}">0</p>
                        <span class="stat-change positive">+15% this month</span>
                    </div>
                </div>
                <div class="stat-card card">
                    <div class="stat-icon">üì¶</div>
                    <div class="stat-content">
                        <h3>Orders Today</h3>
                        <p class="stat-number" th:text="${ordersToday}">0</p>
                        <span class="stat-change positive">+5% from yesterday</span>
                    </div>
                </div>
            </div>

            <div class="dashboard-layout">
                <div class="recent-orders-card card">
                    <div class="card-header">
                        <h2>All Orders</h2>
                        <div class="meta"><span>Total: </span><strong th:text="${allOrders}">0</strong></div>
                    </div>
                    <div class="orders-table">
                        <table>
                            <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Date</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="order : ${orders}">
                                <td th:text="${order.orderNumber}"></td>
                                <td th:text="${order.owner.username}"></td>
                                <td th:text="${#numbers.formatDecimal(order.totalAmount, 1, 2)} + ' ‚Ç¨'"></td>
                                <td>
                                    <span class="status-badge" th:classappend="${order.status.name().toLowerCase()}"
                                          th:text="${order.status.name()}"></span>
                                </td>
                                <td th:text="${#temporals.format(order.createdOn, 'dd MMM, yyyy')}">01 Jan, 2025</td>
                            </tr>
                            <tr th:if="${#lists.isEmpty(orders)}">
                                <td colspan="5" style="text-align:center; opacity:.7">No orders found</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="quick-actions-card card">
                    <div class="card-header">
                        <h2>Quick Actions</h2>
                    </div>
                    <div class="actions-grid">
                        <a class="action-item" th:href="@{/admin/notifications}">
                            <div class="action-icon">üß†</div>
                            <div class="action-content">
                                <h3>System Notifications</h3>
                                <p>Monitor system issues and alerts</p>
                            </div>
                        </a>
                        <a class="action-item" th:href="@{/admin/users}">
                            <div class="action-icon">üë•</div>
                            <div class="action-content">
                                <h3>Manage Users</h3>
                                <p>View and manage user accounts</p>
                            </div>
                        </a>
                        <a class="action-item" th:href="@{/admin/albums}">
                            <div class="action-icon">üéµ</div>
                            <div class="action-content">
                                <h3>Manage Albums</h3>
                                <p>Add, edit, or remove albums</p>
                            </div>
                        </a>
                        <a class="action-item" href="/admin/reports">
                            <div class="action-icon">üìä</div>
                            <div class="action-content">
                                <h3>Reports</h3>
                                <p>Sales and analytics reports</p>
                            </div>
                        </a>
                        <a class="action-item" href="/admin/settings">
                            <div class="action-icon">‚öôÔ∏è</div>
                            <div class="action-content">
                                <h3>Settings</h3>
                                <p>Store configuration</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class="top-albums-card card">
                <div class="card-header">
                    <h2>Top Selling Albums</h2>
                    <a th:href="@{/admin/albums}" class="view-all-link">View All</a>
                </div>
                <div class="albums-list">
                    <div class="album-item" th:each="album : ${topSellingAlbums}">
                        <div class="album-image">
                            <img th:src="${album.coverUrl}" alt="Album">
                        </div>
                        <div class="album-info">
                            <h4 th:text="${album.title}">Title</h4>
                            <p th:text="${album.artist}">Artist</p>
                        </div>
                        <div class="album-stats">
                            <span class="sales-count"><span th:text="${album.unitsSold}">0</span> sales</span>
                            <span class="revenue"><span th:text="${album.revenue}">0</span> ‚Ç¨</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<th:block th:replace="~{fragments/footer :: site-footer}"></th:block>

</body>

</html>
